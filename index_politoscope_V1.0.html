<!DOCTYPE html>
<meta charset="utf-8">
<title>EXPLORATEUR des RESULTATS des ELECTIONS EUROPEENNES et PRESIDENTIELLES de 1999 à 2019 V1.0 date 04 oct 2019</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="élection, france, résultats, européennes , présidentielles">
<script   src="https://code.jquery.com/jquery-2.2.1.min.js"  integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00="  crossorigin="anonymous"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/style.css">

<style>
 .labeled::after {
  margin-left: 2em;
  white-space: nowrap;
  content: attr(aria-label);
}
#sidebar {     
            overflow: auto;
            background: rgba(255, 255, 255, 1);
            font-family: "Verdana";
            padding-left: 10px;
            font-size: 11px;
            color: #000;
        }

body{
	font-family: 'Verdana', Geneva, sans-serif;
background-color: #fff;
}

svg {
background-color: #fff;
}
h2 {
  text-align: center;
  margin: 2px;  
  font-size: 14px;
  color :black
}


h3 {
  text-align: center;
  margin: 2px;  
  font-size: 14px;
  color :black;
  font-weight: normal;
}

h1 {
  font-size: 18px;
  text-align: center;
  margin: 2px;
  color :#006d2c
}

p {
  font-size:14px;
  margin: 10px;
   color : rgb(46, 45, 45)}

.map-wrapper {
  position: relative;
  width: 100%;
  height: 600px;
}

#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
}

a {
  text-decoration: none;
  color: rgb(17, 122, 207);
}

#console {
  position: absolute;
  width: 250px;
  margin: 5px;
  padding: 3px 3px;
  background-color: white;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }

.legend {
background-color: #eee;
border-radius: 3px;
bottom: 30px;
box-shadow: 0 1px 2px rgba(0,0,0,0.10);
font: 9px/10px 'Verdana', Geneva, sans-serif;
padding: 10px;
text-align: left;
left: 10px;
z-index: 1;
}
 
.legend h4 {
margin: 0 0 10px;
}

.legend div span {
border-radius: 50%;
display: inline-block;
height: 10px;
margin-right: 5px;
width: 10px;
}
.button {background-color: rgba(210,210,210, 0.8); color: black}  

.axis line{
  stroke: black;
}

.axis path{
  stroke: black;
}
.axis text{
  fill: black;
} 
</style>`

<body>
<div id = "haut_page"> </div>

<!--le politoscope-->
<div class='container event-lp-calendar-image' style="font: 9px sans-serif; background-color: #fff">
    <div class="panel-body" style="font-size:40px; text-align: center; background-color: #85d6d2; color:rgb(241, 10, 10);"  ><strong>Le Polit<img src="http://toulouse-dataviz.fr/observablehq/2009_circle.png" alt="logo">scope <br></strong>
    </div>
 <!--Le PolitOscope-->

<!--Banner-->
<div class="banner">
  <div class="bg-color">
    <div class="container">
      <div class="row">
        <div class="banner-text text-center">
          <div class="text-border">
            <h2 class="text-dec">Découvrez l'évolution du vote des Français <br>sur la période 1999 - 2019</h2>
          </div>
          <div class="intro-para text-center quote">
            <p class="big-text"> <br>En visualisant les résultats des élections Européennes et Présidentielles <br></p>
            <p class="big-text">de toutes les communes de la France métropolitaine <br>
            <p class="small-text"><br>
            <br>
          </div>
         </div>
      </div>
    </div>
  </div>
</div>
<!--/ Banner-->
<p>&nbsp;</p>

<!-- modal -->
<div class='row '>
    <div class="col-md-offset-4 col-md-1 text-center">
        <button type="button" class="btn btn-success" data-toggle="modal" data-target="#fonctionnement">Fonctionnement</button>
        <div class="modal fade bd-example-modal-lg" id="fonctionnement" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
          <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h2 class="modal-title" style="color: #000; font-size: 25px;" >FONCTIONNEMENT</h2>
                    </div>
                    <div class="modal-body"  >
                        <p text-align='left' style="color: #000; font-size: 20px;">
                            Les résultats sont visualisés sur une carte et un graphique à barres.<br><br>
                            &bull; Se déplacer vers le <a href="#repere_date">sélecteur de dates </a>et sélectionner une date d'élection <br><br>
                            &bull; Déplacer le curseur de la souris sur la carte pour zoomer et déplacer la carte. <br>
                            La fenêtre à gauche de la carte donne les informations détaillées de la commune survolée par la souris. <br><br>
                            &bull; Se déplacer vers le <a href="#repere_date">sélecteur de communes </a>pour centrer et zoomer la commune sur la carte.<br><br>
                            &bull; Se déplacer vers le <a href="#repere_graph">graphique à barres </a>pour visualiser le regroupement par types de communes.</p>
                        </p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div> 
          </div>
        </div>
    </div>

    <div class="col-md-offset-1 col-md-2 text-center">
        <button type="button" class="btn btn-success" data-toggle="modal" data-target="#informations">Informations</button>
        <div class="modal fade bd-example-modal-lg" id="informations" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
          <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h2 class="modal-title" style="color: #000; font-size: 25px;">INFORMATIONS</h2>
                    </div>
                    <div class="modal-body">
                        <p text-align='left' style="color: #000; font-size: 20px;"">
                            &bull; La carte représente soit les listes arrivées en tête pour les élections européennes, soit les candidats arrivés en tête au 1er tour pour les élections présidentielles.<br><br>
                            &bull; Chaque commune est représentée par un cercle dont le diamètre est fonction de sa population.<br><br>
                            &bull; Les couleurs représentent les nuances politiques des listes ou des candidats arrivé(e)s en tête. <br><br> 
                            &bull; La déformation de la carte minimise la superposition des cercles et facilite la lecture de la carte.<br><br>
                            &bull; Le graphique à barres représente la liste ou le candidat arrivé(e) en tête par groupe de communes. Toutes les communes sont regroupées par nombre d'habitants.<br><br>
                            &bull; Cet explorateur de données n’est pas adapté à une utilisation sur smartphone ou tablette.<br><br>
							&bull; Retrouvez le code sur <a href="https://github.com/ToulouseDataViz/Politoscope">GitHub.</a>
                        </p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div> 
          </div>
        </div>
    </div>
  </div> 
    <!-- /modal --> 
     
     <div class='row '>
     <p>&nbsp;</p>  
    <h3><div class="col-md-12  text-center"><span id="titre"></span></div></h3>
    <div class="col-md-12" id =mapContainer><!-- Carte des résultats --> </div>
    <h2><div class="col-md-12 text-center" id =legend> <!--legend --> </div></h2><br> 
    <div class="col-md-12" id = "repere_date"> <a href="#haut_page"><p>Haut de la page</p></a></div>
	 </div>
      <div class='row '>
        <div class="col-md-6">
        <div class="panel-body" style="background-color: #85d6d2; "  >
        <div class="col-md-12"  style="color: #000; font-size: 14px;" id =select_year><!-- Selecteur d'années --> </div>
		<h3><div class="col-md-12  text-center" style="text-transform: uppercase";> Date de l'élection </div></h3>
      </div>
      </div>

      <div class="col-md-2 text-center">
		<h3><div class="col-md-12" id =select_reset><!-- Selecteur reset --> </div></h3>
      </div>
     

      <div class="col-md-offset-0 col-md-4">
        <div class="panel-body" style="background-color: #85d6d2; "  >
        <div class="col-md-12 text-center" style="color: #000; font-size: 14px;" id =select_com> <!--Selecteur commune --> </div>
		<h3><div class="col-md-12  text-center"> ZOOMER SUR UNE COMMUNE</div></h3>
      </div>
      </div>
    </div> 
    
    <p>&nbsp;</p>
    <div class='row '>
        <div class=" col-md-12"></div>
           <div class="col-md-12 text-center  " id =rowContainer><!-- row chart --> </div>
			<h3><div class=" col-md-12 text-center " > PAR TYPES DE COMMUNES  </div></h3>
         </div>
    </div>
   <p>&nbsp;</p>
  <h2>Créé par Alain Ottenheimer - <a href="http://datasens.fr" target="_blank"> datasens.fr </a>  avec le support d' Alain Roan - <a href="https://perceptible.fr"> perceptible.fr </a>  - licence <a href="https://fr.wikipedia.org/wiki/Licence_MIT" target="_blank"> MIT </a> - sept 2019</h2>   
  <div class="col-md-2" id = "repere_graph"> <a href="#haut_page"><p></p></a></div>
  <p>&nbsp;</p>
  
</div>

<script type="module">

//popup
$('#exampleModal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('.modal-body input').val(recipient)
})

import {Inspector, Runtime} from "https://unpkg.com/@observablehq/notebook-runtime?module";
import notebook from "https://api.observablehq.com/d/7f0dca51c768ad92.js";

const notebookCellsToRender = {
  "viewof year": "#select_year",
  "viewof nodes": "#select_reset",
  "legend": "#legend",
  "viewof titre" : "#titre",
  "viewof map": "#mapContainer",
  "viewof as": "#select_com",
  "chart": "#rowContainer",

};

Runtime.load(notebook, (cell) => {
  const selector = notebookCellsToRender[cell.name];

  if (selector) {
    return new Inspector(document.querySelector(selector));
  } else {
    return true;
  }
});

// licence MIT https://fr.wikipedia.org/wiki/Licence_MIT
// GitHub https://github.com/ToulouseDataViz/Politoscope 
</script>
</body>
